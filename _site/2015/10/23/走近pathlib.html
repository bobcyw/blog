<!DOCTYPE html>
<!-- saved from url=(0036)http://v3.bootcss.com/examples/blog/ -->
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="介绍pathlib的使用,让小伙伴们跟上时代">
    <meta name="author" content="bobcyw@163.com">
    <link rel="icon" type="image/png" href="/blog/Blog Template for Bootstrap_files/favicon.png"
          sizes="any">
    <!--<link rel="icon" href="http://v3.bootcss.com/favicon.ico">-->
    <!--<link rel="icon" href="http://v3.bootcss.com/favicon.ico">-->

    <title>走近pathlib</title>

    <!-- Bootstrap core CSS -->
    <link href="/blog/Blog Template for Bootstrap_files/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/blog/Blog Template for Bootstrap_files/blog.css" rel="stylesheet">

    <link href="/blog/css/syntax.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]>
    <script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="/blog/Blog Template for Bootstrap_files/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style id="style-1-cropbar-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
    .en-markup-crop-options {
        top: 18px !important;
        left: 50% !important;
        margin-left: -100px !important;
        width: 200px !important;
        border: 2px rgba(255, 255, 255, .38) solid !important;
        border-radius: 4px !important;
    }

    .en-markup-crop-options div div:first-of-type {
        margin-left: 0px !important;
    }
    </style>
    <!--Frame Killer -->
    <style> html{display:none;} </style>
    <script>
       if(self == top) {
           document.documentElement.style.display = 'block';
       } else {
           top.location = self.location;
       }
    </script>
</head>

<body>

<div class="blog-masthead">
    <div class="container">
        <nav class="blog-nav">
            <a class="blog-nav-item active" href="/blog/">Home</a>
            <a class="blog-nav-item" href="http://blog.wisdomfruit.com/resume/index.html">返回个人简历</a>
            <!--<a class="blog-nav-item" href="http://v3.bootcss.com/examples/blog/#">New features</a>-->
            <!--<a class="blog-nav-item" href="http://v3.bootcss.com/examples/blog/#">Press</a>-->
            <!--<a class="blog-nav-item" href="http://v3.bootcss.com/examples/blog/#">New hires</a>-->
            <!--<a class="blog-nav-item" href="http://v3.bootcss.com/examples/blog/#">About</a>-->
        </nav>
    </div>
</div>

<div class="container">

    <div class="blog-header">
        <h1 class="blog-title">走近pathlib</h1>

        <p class="lead blog-description">介绍pathlib的使用,让小伙伴们跟上时代</p>
    </div>

    <div class="row">

        <div class="col-sm-8 blog-main">

            <div class="blog-post">
                <h2 id="section">简介</h2>
<p>pathlib是Python3.4以后引入的一个新模块,也是现在Python里力推的关于文件和目录的操作模块,用以替代os.path,glob.</p>

<p>由于设计理念不同,初接触的人会对这个模块完全摸不到头脑,主要原因是无法建立正确的心智模型.因为pathlib是面向对象的,而老式的os.path,glob是面向过程的.</p>

<h2 id="section-1">对比</h2>
<p>下面将新老用列表的方式进行对比,方便大家顺利转到新模块.新模块用习惯了,是不想回去滴.</p>

<p>注意,表格中fn指一个包含文件路径的字符串,比如”/var/code/readme.txt”, obj指一个由pathlib.Path(fn)包裹的对象</p>

<table class="table table-condensed">
<tr>
<th>老式</th>
<th>新式</th>
</tr>


<tr>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">base</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="c">#得到文件的目录</span></code></pre></div>

</td>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">obj</span><span class="o">.</span><span class="n">parent</span></code></pre></div>

</td>
</tr>

<tr>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">base</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">base</span><span class="p">(</span><span class="n">fn</span><span class="p">))</span>
<span class="c">#得到文件的父目录</span></code></pre></div>

</td>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">obj</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span></code></pre></div>

</td>
</tr>

<tr>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fn_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">base</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fn_path</span><span class="p">,</span> <span class="s">&quot;abc.txt&quot;</span><span class="p">)</span>
<span class="c">#得到同目录下另外一个文件的路径</span></code></pre></div>

</td>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">obj</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s">&quot;abc.txt&quot;</span><span class="p">)</span></code></pre></div>

</td>
</tr>

<tr>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s">&quot;utf-8&quot;</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
  <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="c">#读取文本文件的内容</span></code></pre></div>

</td>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">#python3.4</span>
<span class="n">content</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">)</span>
<span class="c">#or</span>
<span class="c">#python3.5</span>
<span class="n">content</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">)</span></code></pre></div>

</td>
</tr>

<tr>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fn_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">base</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fn_path</span><span class="p">,</span> <span class="s">&quot;*.txt&quot;</span><span class="p">))</span>
<span class="c">#枚举fn目录下的所有txt文件</span></code></pre></div>

</td>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">obj</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s">&quot;*.txt&quot;</span><span class="p">)</span></code></pre></div>

</td>
</tr>

<tr>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">enum_dir</span><span class="p">(</span><span class="n">given_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">handler</span><span class="p">):</span>
    <span class="c">#!@$#!@#$@#</span>
    <span class="c">#!$#!@$$#!$</span>
    <span class="c">#@!$#@!$#@1$</span>
<span class="c">#遍历目录,并对目录下每个文件调用handler</span></code></pre></div>

</td>
<td>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">enum_dir</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">handler</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">iterdir</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
          <span class="n">enum_dir</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
          <span class="n">handler</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></code></pre></div>

</td>
</tr>



</table>

<p>常用的就上述一些,pathlib的具体用法可以参考<a href="https://docs.python.org/3/library/pathlib.html">链接</a>,总之是一个用了不会吃亏的好模块.</p>

            </div>
            <!-- /.blog-post -->

            <!--<div class="blog-post">-->
                <!--<h2 class="blog-post-title">Another blog post</h2>-->

                <!--<p class="blog-post-meta">December 23, 2013 by <a href="http://v3.bootcss.com/examples/blog/#">Jacob</a>-->
                <!--</p>-->

                <!--<p>Cum sociis natoque penatibus et magnis <a href="http://v3.bootcss.com/examples/blog/#">dis parturient-->
                    <!--montes</a>, nascetur ridiculus mus. Aenean eu leo quam. Pellentesque ornare sem lacinia quam-->
                    <!--venenatis vestibulum. Sed posuere consectetur est at lobortis. Cras mattis consectetur purus sit-->
                    <!--amet fermentum.</p>-->
                <!--<blockquote>-->
                    <!--<p>Curabitur blandit tempus porttitor. <strong>Nullam quis risus eget urna mollis</strong> ornare-->
                        <!--vel eu leo. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>-->
                <!--</blockquote>-->
                <!--<p>Etiam porta <em>sem malesuada magna</em> mollis euismod. Cras mattis consectetur purus sit amet-->
                    <!--fermentum. Aenean lacinia bibendum nulla sed consectetur.</p>-->

                <!--<p>Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Duis mollis, est non commodo-->
                    <!--luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Morbi leo risus, porta ac-->
                    <!--consectetur ac, vestibulum at eros.</p>-->
            <!--</div>-->
            <!--&lt;!&ndash; /.blog-post &ndash;&gt;-->

            <!--<div class="blog-post">-->
                <!--<h2 class="blog-post-title">New feature</h2>-->

                <!--<p class="blog-post-meta">December 14, 2013 by <a href="http://v3.bootcss.com/examples/blog/#">Chris</a>-->
                <!--</p>-->

                <!--<p>Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aenean lacinia-->
                    <!--bibendum nulla sed consectetur. Etiam porta sem malesuada magna mollis euismod. Fusce dapibus,-->
                    <!--tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet-->
                    <!--risus.</p>-->
                <!--<ul>-->
                    <!--<li>Praesent commodo cursus magna, vel scelerisque nisl consectetur et.</li>-->
                    <!--<li>Donec id elit non mi porta gravida at eget metus.</li>-->
                    <!--<li>Nulla vitae elit libero, a pharetra augue.</li>-->
                <!--</ul>-->
                <!--<p>Etiam porta <em>sem malesuada magna</em> mollis euismod. Cras mattis consectetur purus sit amet-->
                    <!--fermentum. Aenean lacinia bibendum nulla sed consectetur.</p>-->

                <!--<p>Donec ullamcorper nulla non metus auctor fringilla. Nulla vitae elit libero, a pharetra augue.</p>-->
            <!--</div>-->
            <!-- /.blog-post -->

            <!--<nav>-->
                <!--<ul class="pager">-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">Previous</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">Next</a></li>-->
                <!--</ul>-->
            <!--</nav>-->

        </div>
        <!-- /.blog-main -->

        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
            <div class="sidebar-module sidebar-module-inset">
                <h4>About</h4>

                <p>这里主要是一些技术笔记,和小翻译,希望对大家有用.</p>
            </div>
            <div class="sidebar-module">
                <h4>Archives</h4>
                <ol class="list-unstyled">
                    
                    <li><a href="/blog/2016/10/24/%E5%A6%82%E4%BD%95%E7%94%A8Python3%E5%92%8CMySQL%E8%BF%9B%E8%A1%8C%E9%85%8D%E5%90%88.html">如何用Python3和MySQL进行配合</a> 24 Oct 2016
                    </li>
                    
                    <li><a href="/blog/2015/10/23/%E8%B5%B0%E8%BF%91pathlib.html">走近pathlib</a> 23 Oct 2015
                    </li>
                    
                    <li><a href="/blog/2015/10/23/%E8%B5%B0%E8%BF%91logs%E6%A8%A1%E5%9D%97.html">走近logs模块</a> 23 Oct 2015
                    </li>
                    
                    <li><a href="/blog/2015/10/23/%E8%AE%A4%E8%AF%86%E5%8F%8C%E4%B8%8B%E5%88%92%E7%BA%BF%E5%BC%80%E5%A4%B4%E7%9A%84%E9%82%A3%E4%BA%9B%E5%8F%98%E9%87%8F.html">双下划线开头的那些变量</a> 23 Oct 2015
                    </li>
                    
                    <li><a href="/blog/2015/10/20/git_cleaner%E8%AE%BE%E8%AE%A1%E6%9E%84%E6%80%9D.html">git_cleaner设计构思</a> 20 Oct 2015
                    </li>
                    
                    <li><a href="/blog/2015/10/20/git_cleaner%E7%BC%96%E7%A0%81.html">git_cleaner编码</a> 20 Oct 2015
                    </li>
                    

                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">March 2014</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">February 2014</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">January 2014</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">December 2013</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">November 2013</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">October 2013</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">September 2013</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">August 2013</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">July 2013</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">June 2013</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">May 2013</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">April 2013</a></li>-->
                </ol>
            </div>
            <div class="sidebar-module">
                <h4>Elsewhere</h4>
                <ol class="list-unstyled">
                    <li><a href="https://github.com/bobcyw/">GitHub</a></li>
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">Twitter</a></li>-->
                    <!--<li><a href="http://v3.bootcss.com/examples/blog/#">Facebook</a></li>-->
                </ol>
            </div>
        </div>
        <!-- /.blog-sidebar -->

    </div>
    <!-- /.row -->

</div>
<!-- /.container -->

<footer class="blog-footer">
    <p>Blog template built for <a href="http://getbootstrap.com/">Bootstrap</a> by <a href="https://twitter.com/mdo">@mdo</a>.
    </p>

    <p>
        <a href="http://v3.bootcss.com/examples/blog/#">Back to top</a>
    </p>
</footer>


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="/blog/Blog Template for Bootstrap_files/jquery.min.js"></script>
<script src="/blog/Blog Template for Bootstrap_files/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="/blog/Blog Template for Bootstrap_files/ie10-viewport-bug-workaround.js"></script>


<iframe id="rdbIndicator" width="100%" height="270" border="0"
        src="/blog/Blog Template for Bootstrap_files/indicator.html"
        style="display: none; border: 0; position: fixed; left: 0; top: 0; z-index: 2147483647"></iframe>
</body>
</html>