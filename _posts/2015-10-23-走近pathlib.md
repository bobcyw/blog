---
layout: Blog Template for Bootstrap
title: 走近pathlib
description: 介绍pathlib的使用,让小伙伴们跟上时代
---
## 简介
pathlib是Python3.4以后引入的一个新模块,也是现在Python里力推的关于文件和目录的操作模块,用以替代os.path,glob.

由于设计理念不同,初接触的人会对这个模块完全摸不到头脑,主要原因是无法建立正确的心智模型.因为pathlib是面向对象的,而老式的os.path,glob是面向过程的.

## 对比
下面将新老用列表的方式进行对比,方便大家顺利转到新模块.新模块用习惯了,是不想回去滴.

注意,表格中fn指一个包含文件路径的字符串,比如"/var/code/readme.txt", obj指一个由pathlib.Path(fn)包裹的对象


<table class="table table-condensed">
<tr>
<th>老式</th>
<th>新式</th>
</tr>

<tr>
<td><pre>
<small>os.path.base(fn)</small>
<small>#得到文件的目录</small>
</pre>
</td>
<td><pre>
<small>obj.parent</small>
</pre></td>
</tr>

<tr>
<td><pre>
<small>os.path.base(os.path.base(fn))</small>
<small>#得到文件的父目录</small>
</pre>
</td>
<td><pre>
<small>obj.parent.parent</small>
</pre></td>
</tr>

<tr>
<td><pre>
<small>fn_path = os.path.base(fn)</small>
<small>os.path.join(fn_path, "abc.txt")</small>
<small>#得到同目录下另外一个文件的路径</small>
</pre>
</td>
<td><pre>
<small>obj.parent.joinpath("abc.txt")</small>
</pre></td>
</tr>


<tr>
<td>
<pre>
<small>with open(fn, "utf-8", "r") as f:</small>
    <small>content = f.read()</small>
<small>#读取文本文件的内容</small>
</pre>
</td>
<td>
<pre>
<small>content = obj.read_bytes().decode("utf-8") <sub>python3.4</sub>
#or
content = obj.read_text("utf-8") <sub>python3.5</sub></small>
</pre>
</td>
</tr>

<tr>
<td>
<pre>
<small>fn_path = os.path.base(fn)</small>
<small>glob(os.join(fn_path, "*.txt"))</small>
<small>#枚举fn目录下的所有txt文件</small>
</pre>
</td>
<td>
<pre>
<small>obj.parent.glob("*.txt")</small>
</pre>
</td>
</tr>

<tr>
<td>
<pre>
<small>
def enum_dir(given_path: str, handler):
    $#!@$#!@#$@#
    $#!$#!@$$#!$
    #@!$#@!$#@1$
#遍历目录,并对目录下每个文件调用handler</small>
</pre>
</td>
<td>
<pre>
<small>
{% highlight Python %}
def enum_dir(obj: pathlib.Path, handler):
    for item in obj.iterdir():
        if item.is_dir():
            enum_dir(item, handler)
        if item.is_file():
            handler(item)
{% endhighlight %}
</small>
</pre>
</td>
</tr>

</table>

常用的就上述一些,pathlib的具体用法可以参考[链接](https://docs.python.org/3/library/pathlib.html),总之是一个用了不会吃亏的好模块.
